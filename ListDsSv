#include <iostream>
#include <string>
using namespace std;

// Struct SinhVien
struct sinhVien {
    string hoten;
    string mssv;
    int namsinh;
    double gpa;
};

// Node danh sach lien ket
struct Node {
    sinhVien data;
    Node* next;
};

typedef Node* node;

// Struct danh sach
struct List {
    node firstNode = nullptr;
};

// Ham nhap 1 sinh vien
sinhVien nhapSV() {
    sinhVien sv;
    cout << "Nhap ho ten: ";
    getline(cin, sv.hoten);
    cout << "Nhap MSSV: ";
    cin >> sv.mssv;
    cout << "Nhap nam sinh: ";
    cin >> sv.namsinh;
    cout << "Nhap GPA: ";
    cin >> sv.gpa;
    cin.ignore();
    return sv;
}

// In danh sach
void inDs(List* list) {
    node p = list->firstNode;
    if (!p) {
        cout << "Danh sach rong.\n";
        return;
    }
    cout<<"Ho ten\tMa sinh vien\tNam sinh\tGPA\n";
    while (p) {
        cout <<p->data.hoten << "\t"
             <<p->data.mssv << "\t"
             <<p->data.namsinh << "\t"
             <<p->data.gpa << "\n";
        p = p->next;
    }
}

// Đem sinh vien GPA > 3.2
int demgpahon3_2(List* list) {
    int dem = 0;
    node p = list->firstNode;
    while (p!=nullptr) {
        if (p->data.gpa > 3.2) dem++;
        p = p->next;
    }
    return dem;
}

// Tinh chieu dai danh sach
int chieudaiDs(List* list) {
    int dem = 0;
    node p = list->firstNode;
    while (p!=nullptr) {
        dem++;
        p = p->next;
    }
    return dem;
}

// Sap xep danh sach theo GPA tang dan
void sapXep(List* list) {
    for (node p = list->firstNode; p && p->next; p = p->next) {
        node min = p;
        for (node q = p->next; q; q = q->next) {
            if (q->data.gpa < min->data.gpa) {
                min = q;
            }
        }
        sinhVien x = min->data;
        min->data = p->data;
        p->data = x;
    }
}

// Them sinh vien vao dau danh sach
void themvaodauDs(List*list, sinhVien sv) {
    node p = new Node{sv, nullptr};
    p->next = list->firstNode;
    list->firstNode = p;    
}

// Tao node moi
node createNode(sinhVien sv){
    node p= new Node;
    p->data=sv;
    p->next=nullptr;
    return p;
}

// Tim sinh vien theo ten
bool timten(List* list, string name){
    node p= list->firstNode;
    while(p!=nullptr){
        if(p->data.hoten== name)
        return true;
    }
    p=p->next;
    return false;
}

int main(){
    List list;
    list->firstNode== nullptr;
    While(1){
        cout<<"1. Nhap sinh vien vao danh sach\n";
        cout<<"2. Tinh chieu dai danh sach\n";
        cout<<"3. So sinh vien có gpa > 3.2\n";
        cout<<"4. In danh sach\n";
        cout<<"5. Tim ten sinh vien trong danh sach\n";
        cout<<"6. Sap xep sinh vien theo thu tu gpa tang dan\n";
        cout<<"7. Them 1 sinh vien vao dau danh sach\n";
        cout<<"Nhap lua chon:";
        int lc;
        cin>>lc;
        if(lc==1){
            int n;
            cout<<"Nhap so luong sinh vien: ";
            cin>>n;
            for (int i=0;i<n;i++){
                cout<<"\nNhap sinh vien thu"<<i+1<<":\n";
                sinhVien sv = nhapSV();
            }
        }
        else if(lc==2){
            chieudaiDs(&list);
        }
        else if(lc==3){
            demgpahon3_2(&list);
        }
        else if(lc==4){
            inDs(&list);
        }
        else if(lc==5){
            string name;
            cout<<"Nhap ten can tim:\n";
            getline(cin,name);
            if(timten(&list,ten))
            cout<< "Danh sach co sinh vien ten:"<<name<<endl;
            else
            cout<<"Danh sach khong co sinh vien ten:"<<name<<endl;
        }
        else if(lc==6){
            sapXep(&list);
        }
        else if(lc==7){
            themvaodauDs(&list,sv);
        }
    }
}
